<!doctype html>
<script src="../js/privilege.js"></script>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="../css/main.css">
    <title>Справочник резервов</title>
    <script src="../js/vendor/jquery-3.2.1.min.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/vendor/sweetalert2.all.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
</head>
<body>
<script>
    $(function(){
        $("#sidebar").load("templates/sidebar.html");
        $("#header").load("templates/header.html");
    });
</script>
<div id="header"></div>
<div id="sidebar"></div>
<div class="wrapper col-md-8">
    <div class="header">Справочник резервов</div>
    <h3 id="responsibleMsg" class="hidden centered">Отметьте резервы для передачи</h3>
    <div class="centered">
        <div>Доступные резервы:</div>
        <span id="empty_notification"></span>
        <table class="handbook_table preload" id="handbook_table">
        </table>
    </div>
    <div id="changeResponsibleButtons" class="middle">
        <button class="button col-md-2" onclick="toggleResponsibilityBlock()">Отмена</button>
        <button class="button col-md-2" onclick="sendResponsibleSwitch()">Отправить</button>
    </div>
    <button id="changeResponsibleActivate" class="button col-md-3 middle" onclick="toggleResponsibilityBlock()">Передать ответственность</button>
    <div id="add_reserve">
        <script>$("#add_reserve").hide();</script>
        <button class="button middle col-md-3" id="add_button">Добавить новый резерв</button>
        <form id="add_form" class="handbook_form">
            <div class="input_block middle">
                <label for="title">Отображаемое имя</label>
                <input type="text" maxlength="15" minlength="3" required placeholder="имя резерва" id="title"
                       name="title" class="validate" pattern="^[a-zA-Zа-яА-ЯЁё]{1}[a-zA-Zа-яА-ЯЁё-_0-9]+$">
            </div>
            <div class="input_block middle">
                <label for="bank">Банк</label>
                <select id="bank" name="bank" required
                        onchange="fillSelectWithCurrencies(document.getElementById('currency'), 'bank')">
                    <option disabled selected value="" hidden>Загрузка...</option>
                </select>
            </div>
            <div class="input_block middle">
                <label for="currency">Валюта</label>
                <select id="currency" name="currency" required disabled onchange="selectCurrency()">
                    <option disabled selected value="" hidden>Выберите банк...</option>
                </select>
            </div>
            <div class="input_block middle">
                <label for="owner">Владелец</label>
                <select id="owner" name="owner" required>
                    <option disabled selected value="" hidden>Загрузка...</option>
                </select>
            </div>
            <div class="input_block middle">
                <label for="responsible">Ответственный</label>
                <select id="responsible" name="responsible" required>
                    <option disabled selected value="" hidden>Загрузка...</option>
                </select>
            </div>
            <br>
            <div class="input_block middle">
                <label for="legalOwner">Держатель карты</label>
                <input type="text" maxlength="25" minlength="3" placeholder="Держатель карты" id="legalOwner"
                       name="legalOwner" class="validate" pattern="^[a-zA-Zа-яА-ЯЁё]{1}[a-zA-Z-_0-9а-яА-ЯЁё\W]+$">
            </div>
            <div class="input_block middle">
                <label for="numberCard">Номер карты</label>
                <input type="text" maxlength="40" minlength="8" placeholder="Номер счета" id="numberCard"
                       name="numberCard" class="validate">
            </div>
            <div class="input_block middle">
                <label for="validity">Срок действия</label>
                <input type="text" maxlength="5" minlength="5" placeholder="00/00" id="validity"
                       name="validity" class="validate" pattern="(0[1-9]|1[0-2])\/[0-9]{2}">
            </div>
            <div class="input_block middle">
                <label for="chargeable">Оплачиваемая</label>
                <input type="checkbox" id="chargeable"
                       name="chargeable" value="true">
            </div>
            <div class="centered">
                <div id="error-msg"></div>
                <button class="button submit_button" type="submit">Отправить</button>
            </div>
        </form>
    </div>
    <div>
        <a href="menu.html">
            <button class="button exit_button">В меню</button>
        </a>
    </div>
</div>
</body>
</html>
<script src="../js/pages/reserve_handbook.js"></script>
